{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Giỏ hàng</title>
    <link rel="stylesheet" href="{% static 'css/Giohang.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/grid.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>
<body>
    {% include "header.html" %}
    <div class="content">
        <div class="grid">
            <div class="row">
                <div class="column xxl-12">
                    <div class="cart__breadcrumb">
                        <a href="/">Trang chủ</a> &gt; <span>Giỏ hàng của bạn</span>
                    </div>
                    <h1 class="cart__title">Giỏ hàng</h1>
                    <div class="row">
                        <div class="column xxl-8 md-12 sm-12 xsm-12">
                            <table class="cart__table">
                                <thead>
                                    <tr>
                                        <th>Sản phẩm</th>
                                        <th>Số lượng</th>
                                        <th>Thành tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item in cart_items %}
                                    <tr>
                                        <td>
                                            <img src="{{ item.image_url }}" alt="{{ item.product_name }}" class="cart__product-img">
                                            <span>{{ item.product_name }}</span>
                                        </td>
                                        <td>
                                            <form action="{% url 'cap_nhat_so_luong' %}" method="post" style="display:inline;">
                                                {% csrf_token %}
                                                <input type="hidden" name="product_MaSp" value="{{ item.MaSp }}">
                                                <input type="hidden" name="action" value="decrease">
                                                <button type="submit" class="quantity-btn">-</button>
                                            </form>
                                            <span>{{ item.quantity }}</span>
                                            <form action="{% url 'cap_nhat_so_luong' %}" method="post" style="display:inline;">
                                                {% csrf_token %}
                                                <input type="hidden" name="product_MaSp" value="{{ item.MaSp }}">
                                                <input type="hidden" name="action" value="increase">
                                                <button type="submit" class="quantity-btn">+</button>
                                            </form>
                                        </td>
                                        <td>
                                            <span>{{ item.total_price|floatformat:0 }}₫</span>
                                        </td>
                                        <td>
                                            <form action="{% url 'xoa_san_pham_gio' %}" method="post" style="display:inline;">
                                                {% csrf_token %}
                                                <input type="hidden" name="product_MaSp" value="{{ item.MaSp }}">
                                                <button type="submit" class="remove-btn">Xóa</button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="column xxl-4 md-12 sm-12 xsm-12">
                            <div class="cart__summary">
                                <div class="cart__total">
                                    Tổng tiền <span>{{ cart_total|floatformat:0 }}₫</span>
                                </div>
                                <textarea class="cart__note" placeholder="Ghi chú"></textarea>
                                <button class="cart__checkout-btn">Thanh toán ngay</button>
                                <button class="cart__continue-btn">Tiếp tục mua hàng</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <form action="{% url 'them_vao_gio' %}" method="post" class="add-to-cart-form">
        {% csrf_token %}
        <input type="hidden" name="product_MaSp" value="{{ product.MaSp }}">
        <button type="submit" class="add-to-cart-btn">Thêm vào giỏ hàng</button>
    </form>
    {% include "footer.html" %}
</body>
</html>